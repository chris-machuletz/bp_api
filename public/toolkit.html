<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Toolkit for POST and PUT requests</title>
</head>
<body>
    <form action="">
        <label for="route">Datenpaket für:</label>
        <select name="urls" id="urls" onChange="updatePreset()">
            <option value="" disabled selected>Bitte auswählen...</option>
            <option value="/bewohner">/bewohner</option>
            <option value="/kontaktperson/1">/kontaktperson/1</option>
            <option value="andere">andere URL...</option>
        </select>
        <label for="method">Method</label>
        <input type="radio" name="method" value="post" id="method_post"> POST
        <input type="radio" name="method" value="put" id="method_put"> PUT<br>
        <input type="text" name="daten" id="request_data"><br>
        <input type="button" value="Datenpaket generieren" onclick="generateData()">
    </form>

    <div id="data_to_send"></div>

    <input type="button" value="Datenpaket absenden" onclick="sendData()" id="btn_send_data" disabled>

    <script>
        let url = "";
        let options = "";

        function updatePreset() {
            let preset = document.getElementById("urls").value;
            switch (preset) {
                case "/bewohner":
                    document.getElementById("method_post").checked = true;
                    document.getElementById("request_data").value = '{"nachname": "Mustermann", "vorname": "Max", "zimmernummer": 101, "pflegegrad": 1, "geburtsdatum": "1950-05-01", "geschlecht": "m"}';
                    break;
                case "/kontaktperson/:id":
                    document.getElementById("method_put").checked = true;
                    document.getElementById("request_data").value = '{"nachname": "Mustermann", "vorname": "Max", "telefonnummer": "17123456789"}';
                    break;
                case "andere":
                    document.getElementById("request_data").value = "";
                    break;
                default:
                    break;
            }
        }
        function generateData() {
            let radio = document.querySelector('input[name="method"]:checked').value;
            console.log(radio);

            const path = document.getElementById("urls").value;
            url = "https://dev.imkerei-bienenfreund.de" + path;
            const data = JSON.parse(document.getElementById("request_data").value);
            options = {
                headers: {
                    "content-type": "application/json; charset=UTF-8"
                },
                body: data,
                method: document.querySelector('input[name="method"]:checked').value
            };
            console.log(data);
            console.log(options);

            document.getElementById("data_to_send").innerHTML = JSON.stringify(data);
            document.getElementById("btn_send_data").disabled = false;
        }

        function sendData() {
            console.log(url);
            console.log(options);
            fetch(url, options)
                .then(data => console.log(JSON.stringify(data)))
                .catch(error => console.error(error));
        }
    </script>
    
</body>
</html>